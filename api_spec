FORMAT: 1A
HOST: http://api.telephant.co.za

# Telephant API

HTTP is the backbone of the Telephant API. Our API is RESTful in nature. It has resource URLs that are predictable. To indicate errors, it returns HTTP response codes. It also accepts JSON in the HTTP body and returns it. To use Rebilly's API, you can use one of our SDKs or your preferred HTTP/REST library for your programming language (currently available in PHP and Javascript).

## Authentication

You will get your secret API key when you sign up for an account. Additional API keys can be created, and API keys can be deleted (as you may need to rotate your keys in the future). By using your secret key in the request header, you can authenticate with the Telephant API.

Never share your secret keys. Keep them guarded and secure.

## Errors

Telephant uses the RFC 7807 error response format, also known as Problem Details for HTTP APIs. Your client must be prepared to gracefully manage these types of responses, just as it must with our standard normalÂ API responses.

### 400 Bad Request

Due to an apparent client error, the server cannot or will not process the request (e.g., malformed request syntax, size too large, invalid request message framing, or deceptive request routing)

### 401 Unauthorized

Authentication is required and has failed or has not yet been provided.

### 402 Payment Required

Insufficient balance in your airtime account.

### 403 Forbidden

The request was legitimate and the server acknowledged it, but the server is refusing to act. This may be because the user lacks the required permissions for a resource.  For example you are asking to delete a contact not associated to your account.

### 404 Not Found

The requested resource was not identified, but it could be accessible later. The client is free to make additional requests.

### 405 Method Not Allowed

A GET request on a form that needs data to be presented via POST, or a PUT request on a read-only resource, for example, is not supported for the requested resource.

## SDKs

To communicate with the API, Telephant provides a Javascript SDK and a PHP SDK. The API, on the other hand, does not require the use of an SDK.

You can test our API with any HTTP we can recommend:

* Chrome Browser
* Firefox Browser
* WGET
* CURL
* Postman

### Javascript SDK

This github repository contains installation and usage instructions. The docs folder contains SDK code examples.

### PHP SDK

This github repository contains installation and usage instructions. The docs folder contains SDK code examples.

# Telephant API Root [/]

This resource does not have any attributes. Instead it offers the initial API affordances in the form of the links in the JSON body.



## Retrieve the Entry Point [GET]

+ Response 200 (application/json)

        {
            "questions_url": "/questions"
        }

## Group 

You can view your balance. Send and request airtime from a  verified contact.

### /airtime [GET]

Request the balance of airtime credit on your Telephant account.

### /airtime [POST]

Initiate a request to use some of your airtime balance.  The amount of airtime your wish to use must be greater than or equal to the balance of airtime credit available to account.

A POST request to this api route with the requisite body detail will result in Telephant credit being "cashed out" into cell phone airtime.

**Note**
* This is not a reversible action.
* The minimum amount of airtime credit that you can convert is R 5.00.
*A transaction fee... (not implemented as yet)

### /airtime/{ContactID} [GET]

### /airtime/{ContactID} [POST]

## Group Contacts

You can access and edit your contacts lists from your personal, company, and other accounts in Contacts. You can also add, update, and delete details about your contacts.  In order to request or send airtime you will need a verified contact.

## Contacts [/contacts]

You can list and create contacts on this path.

You will need to be authenticated to access the contacts path.  Information returned is related to the authenticated account.

### /contacts [GET]

Retrieve a list of contacts associated to your account.

### /contacts [PUT]

Create a new contact associated to your account.

## Contacts [/contacts/{telephone_number}]

You can review, view and delete a sepcific contacts on this path.

The telephone number must conform with an international South African cellphone number format.  That is a valid South African number prefixed with the international dialing code of "+27" and dropping the leading zero and followed by a 9 digit number.

So for example: +27821111111.

Please review [this artice](https://en.wikipedia.org/wiki/Telephone_numbers_in_South_Africa) for more information.

The telphone number must be of a valid contact in the contacts list.

You will need to be authenticated to access the contacts path.  Information returned is related to the authenticated account.

### /contacts/{telephone_number} [GET]

Retrieve a contact with specified identifier string.

### /contacts/{telephone_number} [PATCH]

### /contacts/{telephone_number} [DELETE]

## Group Transactions

### /transactions [GET]

### /transactions/{TransactionsID} [GET]

Retrieve a transaction with specified identifier string.

## Group Notifications

### /notifications [GET]

### /notifications/{NotificationsID} [GET]

Retrieve a notification with specified identifier string.

### /notifications/{NotificationsID} [PATCH]





## Question [/questions/{question_id}]

A Question object has the following attributes:

+ question
+ published_at - An ISO8601 date when the question was published.
+ url
+ choices - An array of Choice objects.

+ Parameters
    + question_id: 1 (required, number) - ID of the Question in form of an integer

### View a Questions Detail [GET]

+ Response 200 (application/json)

        {
            "question": "Favourite programming language?",
            "published_at": "2014-11-11T08:40:51.620Z",
            "url": "/questions/1",
            "choices": [
                {
                    "choice": "Swift",
                    "url": "/questions/1/choices/1",
                    "votes": 2048
                }, {
                    "choice": "Python",
                    "url": "/questions/1/choices/2",
                    "votes": 1024
                }, {
                    "choice": "Objective-C",
                    "url": "/questions/1/choices/3",
                    "votes": 512
                }, {
                    "choice": "Ruby",
                    "url": "/questions/1/choices/4",
                    "votes": 256
                }
            ]
        }

## Choice [/questions/{question_id}/choices/{choice_id}]

+ Parameters
    + question_id: 1 (required, number) - ID of the Question in form of an integer
    + choice_id: 1 (required, number) - ID of the Choice in form of an integer

### Vote on a Choice [POST]

This action allows you to vote on a question's choice.

+ Response 201

    + Headers

            Location: /questions/1

## Questions Collection [/questions{?page}]

+ Parameters
    + page: 1 (optional, number) - The page of questions to return

### List All Questions [GET]

+ Response 200 (application/json)

    + Headers

            Link: </questions?page=2>; rel="next"

    + Body

            [
                {
                    "question": "Favourite programming language?",
                    "published_at": "2014-11-11T08:40:51.620Z",
                    "url": "/questions/1",
                    "choices": [
                        {
                            "choice": "Swift",
                            "url": "/questions/1/choices/1",
                            "votes": 2048
                        }, {
                            "choice": "Python",
                            "url": "/questions/1/choices/2",
                            "votes": 1024
                        }, {
                            "choice": "Objective-C",
                            "url": "/questions/1/choices/3",
                            "votes": 512
                        }, {
                            "choice": "Ruby",
                            "url": "/questions/1/choices/4",
                            "votes": 256
                        }
                    ]
                }
            ]

### Create a New Question [POST]

You may create your own question using this action. It takes a JSON object containing a question and a collection of answers in the form of choices.

+ question (string) - The question
+ choices (array[string]) - A collection of choices.

+ Request (application/json)

        {
            "question": "Favourite programming language?",
            "choices": [
                "Swift",
                "Python",
                "Objective-C",
                "Ruby"
            ]
        }

+ Response 201 (application/json)

    + Headers

            Location: /questions/2

    + Body

            {
                "question": "Favourite programming language?",
                "published_at": "2014-11-11T08:40:51.620Z",
                "url": "/questions/2",
                "choices": [
                    {
                        "choice": "Swift",
                        "url": "/questions/2/choices/1",
                        "votes": 0
                    }, {
                        "choice": "Python",
                        "url": "/questions/2/choices/2",
                        "votes": 0
                    }, {
                        "choice": "Objective-C",
                        "url": "/questions/2/choices/3",
                        "votes": 0
                    }, {
                        "choice": "Ruby",
                        "url": "/questions/2/choices/4",
                        "votes": 0
                    }
                ]
            }
